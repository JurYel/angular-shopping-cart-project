<div class="container-fluid p-0">
    <!-- Top Navigation with Search Bar -->
    <!-- <app-navbar></app-navbar> -->
  
    <!-- Main Cart Section -->
    <div class="container pb-5 pt-3">
      <!-- Heading -->
      <div class="row mb-4">
        <div class="col">
          <h2 class="fw-bold">Grocery Cart</h2>
        </div>
        <div class="col-md-3">
            <!-- <form class="d-flex"> -->
            <div class="d-flex">
                <input
                  class="form-control me-2"
                  type="search"
                  placeholder="Search for products"
                  aria-label="Search"
                  [(ngModel)]="searchQuery"
                  (keyup)="searchCart()"
                />
                <button class="btn btn-outline-success" type="submit">
                  Search
                </button>
              </div>
        </div>
      </div>
  
      <!-- Cart Items Table -->
      <div class="card">
        <form [formGroup]="checkoutForm" class="row" (ngSubmit)="onCheckout()">
            <div class="col-md-8 cart">
                <div class="title">
                    <div class=" row">
                        <div class="col"><h4><b>Grocery Cart Items</b></h4></div>
                        <div class="col-sm-2 align-self-center text-right text-muted">{{groceryCart.item_name.length}} items</div>
                    </div>
                </div>   
                <div class="cart-items">
                    <div class="row border-top">
                        <div class="row main align-items-center thead">
                            <div class="col-5">Product</div>
                            <div class="col">Quantity</div>
                            <div class="col">Subtotal</div>
                            <div class="col">Actions</div>
                        </div>
                    </div>
                    <ng-container *ngFor="let item of groceryCart.item_name; let i = index">
                        <div class="cart-item-group row border-top border-bottom">
                            <div class="row main align-items-center tbody">
                                <div class="col-2"><img class="img-fluid" src="{{imageUrls[i]}}"></div>
                                <!-- {{cloudFrontDomain}}/{{s3Folder}}/{{groceryCart.item_img[i]}} -->
                                <div class="col">
                                    <div class="category row text-muted">{{groceryCart.category[i]}}</div>
                                    <div class="row">{{item}}</div>
                                </div>
                                <div class="col-2">
                                    <ng-container *ngIf="quantities && quantities.length" formArrayName="quantities">
                                        <div class="qty-wrapper">
                                            <a class="btn btn-link px-2"
                                                (click)="decreaseQuantity(i)">
                                            <i class="fa-solid fa-minus"></i>
                                            </a>
                                            <input  id="{{ i }}" [formControlName]="i" type="number"
                                                    class="form-control form-control-sm qty-input" min="1"/>
                                            <a class="btn btn-link px-2"
                                                 (click)="increaseQuantity(i)"   >
                                                <i class="fa-solid fa-plus"></i>
                                            </a>
                                            <!-- <a href="#">-</a><a href="#" class="border">{{groceryCart.quantity[i]}}</a><a href="#">+</a> -->
                                        </div>
                                    </ng-container>
                                </div>
                                <div class="col-2"> {{groceryCart.subtotal[i] | currency: 'PHP' : 'symbol': '1.2'}}</div>
                                <div class="col-sm-1"><a class="close" (click)="removeItem(i)">&#10005;</a></div>
                            </div>
                        </div>
                    </ng-container>
                </div>
                <div class="back-to-shop"><a routerLink="/home"><i class="fa-solid fa-left-long"></i></a><span class="text-muted">Back to shop</span></div>
            </div>
            <div class="col-md-4 summary">
                <div><h5><b>Summary</b></h5></div>
                <hr>
                <div class="row">
                    <div class="col" style="padding-left:0;">{{groceryCart.item_name.length}} ITEMS</div>
                    <div class="col text-right">{{ getTotal() | currency: 'PHP': 'symbol': '1.2'}}</div>
                </div>
                <!-- <form> -->
                <div class="formgroup">
                    <p>Mode of Payment</p>
                    <select>
                        <option class="text-muted">Cash on Delivery - {{ '5.00' | currency: 'PHP'}}</option>
                        <option class="text-muted">Gcash</option>
                        <option class="text-muted">PayMaya</option>
                        <option class="text-muted">Pick Up</option>
                    </select>
                    <p>Voucher</p>
                    <input type="text" id="code" placeholder="Enter your code">
                </div>
                <!-- </form> -->
                <div class="row" style="border-top: 1px solid rgba(0,0,0,.1); padding: 2vh 0;">
                    <div class="col">TOTAL PRICE</div>
                    <div class="col text-right">{{ getTotal() + 5 | currency: 'PHP': 'symbol': '1.2' }}</div>
                </div>
                <button class="submit">CHECKOUT</button>
            </div>
        </form>
        
    </div>
    </div>
  </div>
  